<!doctype html>
<html>
   <head>
      <meta charset="utf-8">

      <title>SIGGRAPH 2016 Course - Intro</title>

      <meta name="description" content="Frequency Analysis Course - Part I">
      <meta name="author" content="Laurent Belcour">

      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

      <link rel="stylesheet" href="../css/reveal.css">
      <link rel="stylesheet" href="../css/theme/beige.css" id="theme">
      <link rel="stylesheet" href="../css/androidstudio.css" id="theme">

      <script src="../js/head.min.js"></script>
      <script src="../js/snap.svg.js"></script>
      <script src="../js/reveal.js"></script>
      <script src="../../javascripts/fft.js"></script>
      <script src="../../javascripts/raytracer.js"></script>
      <script src="../../javascripts/course2016-part1.js"></script>
      <script src="../../javascripts/course2016-part2.js"></script>
   </head>
   <body>
   <script type="text/javascript">
      setData("general", "baseurl", "../../");
   </script>
      <div class="reveal">
         <!-- Any section element inside of this container is displayed as a slide -->
         <div class="slides">

            <!-- Title screen -->
            <section class="title"> <!-- data-background="./png/background.png" -->
            <h3>Part II: Frequency Operators</h3>
            <a style="font-size:0.7em;float:left;padding-top:25%" href="part0.html">< previous part</a>
            </section>

            <!-- The overview of the presentation -->
            <section>
               <h4>Overview</h4><br />
               <ol style="color:#aaaaaa;text-align:left;display:block;padding-left:3em;">
                  <li style="padding-bottom:0.5em;">Introduction</li>
                  <li style="color:#000000;padding-bottom:0.5em;">Frequency Operators
                     <ul style="font-size:0.6em;">
                        <li>Travel & Occlusion</li>
                        <li>Reflection & Refraction</li>
                        <li>Scattering & Absorption</li>
                     </ul>
                  </li>
                  <li style="padding-bottom:0.5em;">Applications
                     <ul style="font-size:0.6em;">
                        <li>Adaptive sampling & denoising</li>
                        <li>Upsampling</li>
                        <li>Density estimation</li>
                        <li>Antialiasing</li>
                     </ul>
                  </li>
                  <li style="padding-bottom:0.5em;">Conclusion</li>
               </ol>
            </section>

            <!-- Recap of the light transport integration method -->
            <!--<section>
               <h4>Frequency Analysis of Light Transport</h4>
               <center style="margin-left:110px;">
               <div style="height:512px;">
               <div style="float:left;position:relative;width:512px;height:512px;margin:0;">
               <img id="local-analysis-01-img" src="../../data/images/dragon-01.png" width="512" height="512" style="border-width:0px;position:absolute;z-index:-1;margin:0px;top:0;left:0;" />
               <svg viewBox="0 0 512 512" style="width:512px;height:512px;position:absolute;z-index:1;top:0;left:0;" id="local-analysis-01"></svg>
               <canvas id="local-analysis-01-fft1" width="128" height="128" style="background-color:#FFF;border-width:0px;position:absolute;z-index:3;margin:0px;top:0;left:0;"></canvas>
               <canvas id="local-analysis-01-fft2" width="128" height="128" style="background-color:#FFF;border-width:0px;position:absolute;z-index:3;margin:0px;top:0;left:0;"></canvas>
               </div>
               <div style="float:right;position:relative;width:512;height:512px;margin:0;padding-right:120px">
                  <svg id="rendering-equation-02" width="512px" style="border-width: 0px;margin: 0;"></svg>
               </div>
               </div>
               </center>

               <script type="text/javascript">
                  function renderingEquation02Step00(snap) {
                     var layer = snap.select("#svg2")
                     layer.attr({width: 800, height: 512})
                     snap.select("#lens").attr({ opacity: 0 })
                  }
                  loadSVG("data/svg/course-pbr02.svg", "#rendering-equation-02", renderingEquation02Step00);

                  document.getElementById("local-analysis-01-img").onload = function() {
                    var inset1 = {size:32, x:150, y:200, color: "#aa0000", canvas: "local-analysis-01-fft1"};
                    var inset2 = {size:32, x:210, y:300, color: "#00aa00", canvas: "local-analysis-01-fft2"};
                    var windw1 = {size: 150, x:-150, y:-10};
                    var windw2 = {size: 150, x: 250, y:400};

                    localAnalysisCreateInset("#local-analysis-01", "local-analysis-01-img", inset1, windw1);
                    localAnalysisCreateInset("#local-analysis-01", "local-analysis-01-img", inset2, windw2);
                  }
               </script>
            </section>
            <section>
               <h4>Changing the Lense</h4>
               <center style="margin-left:110px;">
               <div style="height:512px;">
               <div style="float:left;position:relative;width:512px;height:512px;margin:0;">
               <img id="local-analysis-02-img" src="../../data/images/dragon-02.png" width="512" height="512" style="border-width:0px;position:absolute;z-index:-1;margin:0px;top:0;left:0;" />
               <svg viewBox="0 0 512 512" style="width:512px;height:512px;position:absolute;z-index:1;top:0;left:0;" id="local-analysis-02"></svg>
               <canvas id="local-analysis-02-fft1" width="128" height="128" style="background-color:#FFF;border-width:0px;position:absolute;z-index:3;margin:0px;top:0;left:0;"></canvas>
               <canvas id="local-analysis-02-fft2" width="128" height="128" style="background-color:#FFF;border-width:0px;position:absolute;z-index:3;margin:0px;top:0;left:0;"></canvas>
               </div>
               <div style="float:right;position:relative;width:512;height:512px;margin:0;padding-right:120px">
                  <svg id="rendering-equation-03" width="512px" style="border-width: 0px;margin: 0;"></svg>
               </div>
               </div>
               </center>

               <script type="text/javascript">
                  function renderingEquation03Step00(snap) {
                     var layer = snap.select("#svg2")
                     layer.attr({width: 800, height: 512})
                  }
                  loadSVG("data/svg/course-pbr02.svg", "#rendering-equation-03", renderingEquation03Step00);

                  document.getElementById("local-analysis-02-img").onload = function() {
                    var inset1 = {size:32, x:150, y:200, color: "#aa0000", canvas: "local-analysis-02-fft1"};
                    var inset2 = {size:32, x:210, y:300, color: "#00aa00", canvas: "local-analysis-02-fft2"};
                    var windw1 = {size: 150, x:-150, y:-10};
                    var windw2 = {size: 150, x: 250, y:400};

                    localAnalysisCreateInset("#local-analysis-02", "local-analysis-02-img", inset1, windw1);
                    localAnalysisCreateInset("#local-analysis-02", "local-analysis-02-img", inset2, windw2);
                  }
               </script>
            </section>-->
            <section data-transition="fade-in slide-out"> <!-- Here we show how the local FT in that space is made
                           suffiently small to be well defined. -->
               <h4>Fourier Transform of Radiance</h4><br /><br />
               <center><div style="width:80%;text-align:left;">
               $$
                  \mathcal{F}[L](\Omega) = \int_{\mathbf{z} \in \mathbb{R}^N} L(\mathbf{z}) e^{i 2 \pi \, \mathbf{\Omega}^T  \delta\mathbf{z}}, \; \mbox{where} \; \mathbf{z} = [\mathbf{x}, \mathbf{\omega}]
               $$<br /><br />

               <ul>
                  <li class="fragment">This cannot in practice: global definition
                     <ul>
                        <li>Need to treat the whole scene at once</li>
                        <li>Actually not well-defined (discontinuous domain)</li>
                     </ul>
                  </li>
               </ul>
               </div></center>
            </section>
            <section data-transition="slide-in fade-out"> <!-- Here we show how the local FT in that space is made
                           suffiently small to be well defined. -->
               <h4>Local Fourier Transform of Radiance</h4><br />
               <center><div style="width:80%;text-align:left;">
               <ul>
                  <li>local FT requires a window: $ W_l $:</li>
               </ul><br /><br />
               $$
                  \mathcal{F}_l[L](\Omega) = \int_{\mathbf{z} \in \mathbb{R}^N} L(\mathbf{z}) \ \color{red}{ W_l(\mathbf{z}) }\ e^{i 2 \pi \, \mathbf{\Omega}^T \mathbf{z}}, \; \mbox{where} \; \mathbf{z} = [\mathbf{x}, \mathbf{\omega}]
               $$<br /><br />

               <ul class="fragment">
                  <li>Interesting properties:
                     <ul style="font-size:0.8em;">
                        <li>Makes the Fourier Transform well defined</li>
                        <li>The window increase the min frequency</li>
                     </ul>
                  </li>
               </ul>
               </div></center>
            </section>
            <section>
               <h4>Local Fourier Transform of Radiance</h4><br />
               <center><div style="width:80%;text-align:left;"><ul>
                  <li>We aren't looking at point-wise radiance anymore
                      <ul>
                        <li class="fragment" data-fragment-index="1">Local radiance around a main ray</li>
                        <li class="fragment" data-fragment-index="2">Requires a parametrization</li>
                      </ul>
                  </li>
               </ul></div></center>

               <span style="position:absolute;top:400px;left:8%;width:40%;"  class="fragment" data-fragment-index="1">
               <svg>
                  <defs>
                        <marker style="overflow:visible;" id="arrowA" refX="0.0" refY="0.0" orient="auto">
                           <path transform="scale(0.3) rotate(180) translate(10,0)" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "/>
                        </marker>
                     </marker>
                  </defs>
                  <g transform="rotate(-20) translate(70, 130)">
                     <path d="m 0 0 150 0" stroke="black" stroke-width="3" style="marker-end:url(#arrowA)" />
                     <circle cx="0" cy="0" r="5" stroke="black" stroke-width="3" fill="white" />

                  </g>
               </svg><br />
               $$L(\mathbf{x}, \boldsymbol{\omega})$$
               </span>
               <span style="position:absolute;top:400px;left:45%;width:40%;" class="fragment" data-fragment-index="1">
               <svg>
                  <defs>
                        <marker style="overflow:visible;" id="arrow" refX="0.0" refY="0.0" orient="auto">
                           <path transform="scale(0.3) rotate(180) translate(10,0)" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "/>
                        </marker>

                     </marker>
                  </defs>
                  <g transform="rotate(-20) translate(70, 100)">
                     <path transform="scale(4) rotate(0) translate(-8.5,-19)"  d="m 0,0 17.548095,5.94795 -0.448587,26.35563 -17.764371,6.75922 z" stroke="black" stroke-width="1" fill-opacity="0" />
                     <path d="m 0 0 150 0" stroke="black" stroke-width="3" style="marker-end:url(#arrow)" />
                     <circle cx="0" cy="0" r="5" stroke="black" stroke-width="3" fill="white" />

                     <g transform="scale(0.5)">
                        <g transform="translate(30, 50) rotate(10)">
                        <path d="m 0 0 150 0" stroke="black" stroke-width="3" style="marker-end:url(#arrow)" />
                        <circle cx="0" cy="0" r="5" stroke="black" stroke-width="3" fill="white" />
                        </g>
                        <g transform="translate(10, -50) rotate(-5)">
                        <path d="m 0 0 150 0" stroke="black" stroke-width="3" style="marker-end:url(#arrow)" />
                        <circle cx="0" cy="0" r="5" stroke="black" stroke-width="3" fill="white" />
                        </g>
                        <g transform="translate(-10, 50) rotate(20)">
                        <path d="m 0 0 150 0" stroke="black" stroke-width="3" style="marker-end:url(#arrow)" />
                        <circle cx="0" cy="0" r="5" stroke="black" stroke-width="3" fill="white" />
                        </g>
                        <g transform="translate(-25, -90) rotate(-10)">
                        <path d="m 0 0 150 0" stroke="black" stroke-width="3" style="marker-end:url(#arrow)" />
                        <circle cx="0" cy="0" r="5" stroke="black" stroke-width="3" fill="white" />
                        </g>
                        <g transform="translate(-20, 90) rotate(25.6)">
                        <path d="m 0 0 150 0" stroke="black" stroke-width="3" style="marker-end:url(#arrow)" />
                        <circle cx="0" cy="0" r="5" stroke="black" stroke-width="3" fill="white" />
                        </g>
                     </g>
                  </g>
               </svg><br />
               $$L(\mathbf{x} + \delta\mathbf{x}, \boldsymbol{\omega}+ \delta\boldsymbol{\omega})$$
               </span>
            </section>
            <section> <!-- We can do a clean formulation of the FT of L using
                           a two plane parametrization that maps directions
                           to a plane. -->
               <h4>Local Fourier Transform of Radiance</h4><br />
               <center><div style="width:80%;text-align:left;"><ul>
                  <li>We aren't looking at point-wise radiance anymore
                      <ul>
                        <li>Local radiance around a main ray</li>
                        <li>Requires a parametrization</li>
                      </ul>
                  </li>
               </ul></div></center>
               <center  style="transform:scale(1.5);padding-top:2em;">
               <object type="image/svg+xml" data="../../data/svg/cov_twoplanes.svg" width="604px" id="draw_cov_twoplanes"></object><br />
               <script src="../../javascripts/draw_cov_twoplanes.js" type="text/javascript">
var snap = Snap("#draw_cov_twoplanes");
console.log(snap);
               </script>
               </center>
            </section>
            <section>
               <h4>Local Fourier Transform of Radiance</h4><br />
               <center><div style="width:80%;text-align:left;"><ul>
                  <li>We aren't looking at point-wise radiance anymore
                      <ul>
                        <li>Local radiance around a main ray</li>
                        <li>Requires a parametrization</li>
                      </ul>
                  </li><br />
                  <li>Constraint: analytical forms
                    <ul>
                      <li class="fragment" data-fragment-index="1">First order analysis (only consider linear properties)</li>
                      <li class="fragment" data-fragment-index="2">In practice we represent the spectrum</li>
                    </ul>
                  </li>
               </ul></div></center>
               <object type="image/svg+xml" data="../../data/svg/course-representation01.svg" width="90%" class="fragment" data-fragment-index="2"></object>
            </section>
            <!--<section>
               <h4>Break Paths using Operators</h4>
               <center style="width: 100%;position:absolute;top: 20px;left: 0;">
               <svg id="rendering-equation-04" width="1080" style="border-width: 0px;margin: 0;"></svg>
               </center>

               <script type="text/javascript">
                  loadSVG("data/svg/course-pbr02.svg", "#rendering-equation-04", renderingEquation04Step00);
               </script>
            </section>-->


            <section> <!-- Because we use local analysis, we need to look at
                           the variations of elements in the Rendering Eq.
                           like curvature. -->
              <h4>Local Rendering Equation</h4><br /><br />
              <svg id="local-rendering-equation-01" width="956px" height="452px"></svg>
              <script>
              function localRenderingEq01Step00(snap) {
                // Scale the SVG
                var svg2 = snap.select("#layer1");
                svg2.transform(Snap.matrix().scale(4).add(svg2.transform().localMatrix));

                // Clear elements from display
                snap.select("#arrow01").attr({ class: "fragment", "data-fragment-index": 2 });
                snap.select("#cov01").attr({ class: "fragment", "data-fragment-index": 2 });
                snap.select("#cov02").attr({ class: "fragment", "data-fragment-index": 4 });
                snap.select("#cov03").attr({ class: "fragment", "data-fragment-index": 6 });
                snap.select("#cov04").attr({ class: "fragment", "data-fragment-index": 2 });
                snap.select("#op01").attr({ opacity: 0 });
                snap.select("#op02").attr({ opacity: 0 });
                snap.select("#op03").attr({ opacity: 0 });
                snap.select("#step01").attr({ class: "fragment", "data-fragment-index": 3 });
                snap.select("#step02").attr({ class: "fragment", "data-fragment-index": 5 });
                snap.select("#step03").attr({ class: "fragment", "data-fragment-index": 6});
                snap.select("#sensor01").attr({ class: "fragment", "data-fragment-index": 1 });
                snap.select("#sensor02").attr({ class: "fragment", "data-fragment-index": 3 });
                snap.select("#sensor03").attr({ class: "fragment", "data-fragment-index": 5 });
                snap.select("#sensor04").attr({ class: "fragment", "data-fragment-index": 1 });
              }

              function localRenderingEq01Step01(offset) {
              }
              loadSVG("data/svg/cov_path.svg", "#local-rendering-equation-01", localRenderingEq01Step00);
              </script>
            </section>
            <section> <!-- We need to break down the local rendering equation
                           into a set of different operators for which the
                           local FT will have closed forms. -->
               <h4>Rendering Operators</h4><br />

               <object type="image/svg+xml" data="../../data/svg/cov-operator.svg" width="604px" id="draw_cov_twoplanes"></object>
               <br /><br />
               <div style="width:60%">
                <ul>
                  <li  class="fragment" data-fragment-index="1">Implementation example
                    <ul>
                      <li>Manipulation of the covariance matrix</li>
                      <li>Using Matlab's' syntax</li>
                    </ul>
                  </li>
                </ul>
               </div>

               <pre style="width:60%;" class="fragment" data-fragment-index="1">
               <code class="matlab">
Cov = {sxx, sxu;
       sxu, suu};
               </code>
               </pre>

            </section>

            <!--
                                  The different operators
              -->
            <section>
               <h4>First Step Operators: Surface Shading</h4>
               <center style="width: 100%;position:absolute;top:50px;left: 0;">
               <svg id="rendering-equation-11" width="1080px" height=400px style="border-width: 0px;margin: 0;"></svg>
               </center>

               <script type="text/javascript">
                  function renderingEquation11Step00(snap) {
                     renderingEquation04Step00(snap);
                     snap.select("#path1-00").attr({ opacity: 0 });
                     snap.select("#path1-01").attr({ opacity: 0 });
                     snap.select("#path2-00").attr({ opacity: 0 });
                     snap.select("#image4489").attr({ opacity: 0 });
                  }

                  loadSVG("data/svg/course-pbr02.svg", "#rendering-equation-11", renderingEquation11Step00);
               </script>
            </section>
            <section>
               <object type="image/svg+xml" data="../../data/svg/course-pbr01.svg" width="1280px" id="rendering-equation-111"></object>
               <script type="text/javascript">
var svg = document.getElementById("rendering-equation-111");
svg.onload = function() {
  var snap = Snap("#rendering-equation-111");
  snap.rect(140, 310, 340, 100).attr({ stroke: "#ff0000", strokeWidth: "2px", fillOpacity: 0 });
  renderingEquation01Step00(snap);
}
               </script>
            </section>

            <!-- Travel operator -->
            <section>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-10px;"><img src="../../data/images/acm.png" height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(durand2005)">Durand et al. 2005</a></span>
               <h4>Travel Operator</h4><br/>
               <center>
                  <div style="position:relative;width:900px;height:500px;">
                  <canvas id="draw_cov_travel-gl" style="position:absolute;"></canvas>
                  <svg id="draw_cov_travel-cv" width="900px" height="500px" style="position:absolute;top:0px;left:0px;"></svg>
                  </div>
               </center>
               <script type="text/javascript">
                  loadSVG("data/svg/cov_travel.svg", "#draw_cov_travel-cv", travelOperator01Step00);
               </script>
            </section>
            <section>
               <h4>Travel Operator</h4><br/>
               <div style="width:60%">
               <ul>
                 <li>Travel is a shear in local space</li>
               </ul>
               </div>

               <svg id="operator-travel-02" width="400px" height="250px"></svg>
               <script>
                 var snap  = Snap("#operator-travel-02");
                 var frame = CreateFrame(snap, 200, 150, 200, 200);
                 var cov   = CreateCovariance(snap, frame, Snap.matrix(0.9, 0, 0, 0.1, 0, 0));
                 cov.attr({id: "cov"})

                 var operatorTravelShear = function(start, end) {
                  var s = Snap("#operator-travel-02");
                  var c = s.select("#cov");

                  const M = c.transform().localMatrix;
                  Snap.animate(start, end, function(val) {
                    c.transform(M);
                    var temp = Snap.matrix(1, val, 0, 1, 0, 0);
                    c.transform(c.transform().localMatrix.add(temp));
                  }, 500);
                }


                Reveal.addEventListener( 'fragmentshown', function( event ) {
                    if(event.fragment.id == "operator-travel-02-shear") {  operatorTravelShear(0, 9); }
                });
                Reveal.addEventListener( 'fragmenthidden', function( event ) {
                    if(event.fragment.id == "operator-travel-02-shear") { operatorTravelShear(0, -9); }
                });
               </script>
               <pre class="fragment" id="operator-travel-02-shear"></pre>

               <pre style="width:60%;" class="fragment">
               <code class="matlab">
% Travel of 'd' meters
Tr  = [1, d; 0, 1]
Cov = Tr' * Cov * Tr
               </code>
               </pre>
            </section>


            <!-- Occlusion operator -->
            <section>
               <object type="image/svg+xml" data="../../data/svg/course-pbr01b.svg" width="1280px" id="rendering-equation-112"></object>
               <script type="text/javascript">
var svg = document.getElementById("rendering-equation-112");
svg.onload = function() {
  var snap = Snap("#rendering-equation-112");
  snap.rect(680, 310, 155, 100).attr({ stroke: "#ff0000", strokeWidth: "2px", fillOpacity: 0 });
  renderingEquation01Step00(snap);
}
               </script>
            </section>
            <section>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-50px;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(durand2005)">Durand et al. 2005</a></span>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-10px;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(egan2011)">Egan et al. 2011</a></span>
               <h4>Visibility Operator</h4><br/>
               <center>
                  <div style="position:relative;width:900px;height:500px;">
                     <canvas id="draw_cov_occl-gl" style="position:absolute;background-color:#FFF;border:0px"></canvas>
                     <svg width="900px" height="500px" id="draw_cov_occl-cv" style="position:absolute;top:0px;left:0px;"></svg>
                     <!--<button id="draw_cov_occl_bt" type="button" style="position:absolute;left:400px;top:270px;margin-left:auto;margin-right:auto;">Fourier Transform!</button>-->
                  </div>
               </center>
               <script type="text/javascript">
                  loadSVG("data/svg/cov_occlusion.svg", "#draw_cov_occl-cv", occlOperator01Step00);
               </script>
            </section>
            <section>
               <h4>Visibility Operator</h4><br/>
               <center><div style="width:80%;text-align:left;"><ul>
                 <li>Add frequencies in the spatial domain
                    <ul>
                       <li>Has infinite bandwidth!</li>
                    </ul>
                 </li>
               </ul></div></center>
               <svg id="operator-occl-02" width="400px" height="250px"></svg>
               <script>
                 var snap  = Snap("#operator-occl-02");
                 var frame = CreateFrame(snap, 200, 150, 200, 200);
                 var cov   = CreateCovariance(snap, frame, Snap.matrix(0.1, 0, 0, 0.2, 0, 0));
                 var ShearAnimation = function(start, end) {
                  var s = Snap("#operator-occl-02");
                  var c = s.select("#circle");

                  const M = c.transform().localMatrix;
                  Snap.animate(start, end, function(val) {
                    var temp = M;
                    temp.a = val;
                    c.transform(temp);
                  }, 500);
                }


                Reveal.addEventListener( 'fragmentshown', function( event ) {
                    if(event.fragment.id == "operator-occlusion-02-scale") {  ShearAnimation(0.1, 1); }
                });
                Reveal.addEventListener( 'fragmenthidden', function( event ) {
                    if(event.fragment.id == "operator-occlusion-02-scale") { ShearAnimation(1, 0.1); }
                });
               </script>
               <pre class="fragment" id="operator-occlusion-02-scale"></pre>
               <pre style="width:60%;" class="fragment">
               <code class="matlab">
% Visibility operation
Occ = [o, 0; 0, 0]
Cov = Cov + Occ
               </code>
               </pre>
            </section>
            <section>
               <h4>Visibility in Practice</h4><br/>
               <center><div style="width:80%;text-align:left;"><ul>
                 <li>Same as ajusting the local window
                   <ul>
                     <li>Compute the largest unoccluded disk along the ray</li>
                     <li>We will treat <em>near misses</em> the same way as <em>near hit</em>
                   </ul>
                 </li><br />
                 <li class="fragment">Requires a special treatment/data-structure
                    <ul>
                      <li>Voxel grid</li>
                      <li>Distance field</li>
                      <li>Shadow map discontinuities</li>
                    </ul>
                 </li>
               </ul></div></center>
               <object type="image/svg+xml" data="../../data/svg/course-hitmiss.svg" width="750px"></object>
            </section>

            <!-- Local shading needs a further decomposition -->
            <section data-state="rendering-eq-113">
               <!-- <h4>Physically Based Rendering</h4> -->
               <object type="image/svg+xml" data="../../data/svg/course-pbr01.svg" width="1280px" id="rendering-equation-113"></object>
               <script type="text/javascript">
var svg = document.getElementById("rendering-equation-113");
svg.onload = function() {
  var snap = Snap("#rendering-equation-113");
  snap.rect(520, 310, 240, 100).attr({ stroke: "#ff0000", strokeWidth: "2px", fillOpacity: 0 });
  snap.rect(940, 310, 125, 100).attr({ stroke: "#0000ff", strokeWidth: "2px", fillOpacity: 0 });
  renderingEquation01Step00(snap);
}
               </script>
            </section>
            <section>
               <h4>Shading Operator<strong>s</strong></h4><br/>
               <center><div style="width:80%;text-align:left;"><ul>
                 <li>Shading requires to decompose
                   <ul>
                     <li>Final travel to the surface (projection)</li>
                     <li>Material (Textures / BSDF)</li>
                   </ul>
                 </li><br />
                 <li class="fragment">Elements we won't cover
                   <ul>
                     <li>Foreshortenning scale the spatial componnent</li>
                     <li>Texture increase the spatial componnent</li>
                   </ul>
                 </li>
               </ul></div></center>
            </section>


            <!-- Curvature operator -->
            <section>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-10px;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(durand2005)">Durand et al. 2005</a></span>
               <h4>Curvature Operator</h4><br/>
               <center>
                  <div style="position:relative;width:900px;height:500px;">
                     <canvas id="draw_cov_curv-cv" style="position:absolute;background-color:#FFF;border:0px"></canvas>
                     <svg width="900px" height="500px" id="draw_cov_curv-01" style="position:absolute;top:0px;left:0px;"></svg>
                     <!--<button id="draw_cov_occl_bt" type="button" style="position:absolute;left:400px;top:270px;margin-left:auto;margin-right:auto;">Fourier Transform!</button>-->
                  </div>
               </center>
               <script type="text/javascript">
                  loadSVG("data/svg/cov_curv.svg", "#draw_cov_curv-01", curvOperator01Step00);
               </script>
            </section>
            <section>
               <h4>Curvature Operator</h4><br/>
               <center><div style="width:80%;text-align:left;">
               <ul>
                 <li>Curvature shears angular frequencies</li>
               </ul>
               </div></center>
               <svg id="operator-curvature-02" width="400px" height="250px"></svg>
               <script>
                 var snap  = Snap("#operator-curvature-02");
                 var frame = CreateFrame(snap, 200, 150, 200, 200);
                 var cov   = CreateCovariance(snap, frame, Snap.matrix(0.1, 0, 0, 0.9, 0, 0));

                 var ShearXUAnimation = function(start, end) {
                  var s = Snap("#operator-curvature-02");
                  var c = s.select("#circle");

                  const M = c.transform().localMatrix;
                  Snap.animate(start, end, function(val) {
                    c.transform(M);
                    var temp = Snap.matrix(1, 0, val, 1, 0, 0);
                    c.transform(c.transform().localMatrix.add(temp));
                  }, 500);
                }


                Reveal.addEventListener( 'fragmentshown', function( event ) {
                    if(event.fragment.id == "operator-curvature-02-shear") {  ShearXUAnimation(0, 9); }
                });
                Reveal.addEventListener( 'fragmenthidden', function( event ) {
                    if(event.fragment.id == "operator-curvature-02-shear") { ShearXUAnimation(0, -9); }
                });
               </script>
               <pre class="fragment" id="operator-curvature-02-shear"></pre>
               <pre style="width:60%;" class="fragment">
               <code class="matlab">
% Projection to a curved object of radius 'k'
Cv  = [1, 0; k, 1]
Cov = Cv' * Cov * Cv
               </code>
               </pre>
            </section>

            <!-- BRDF operator -->
            <section>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-10px;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(durand2005)">Durand et al. 2005</a></span>
               <h4>Reflection Operator</h4><br/>
               <center>
                  <div style="position:relative;width:900px;height:500px;">
                  <canvas id="draw_cov_brdf-gl" style="position:absolute;"></canvas>
                  <svg id="draw_cov_brdf-cv" width="900px" height="500px" style="position:absolute;top:0px;left:0px;"></svg></div>
                  <div style="font-size:0.7em;">BRDF roughness: 0 <input style="vertical-align: middle;" type="range" min="0.0001" max="0.05" value="0.01" step="0.0005" id="draw_cov_brdf-slider" /> 0.05</div>
               </center>
               <script type="text/javascript">
                  loadSVG("data/svg/cov_brdf.svg", "#draw_cov_brdf-cv", brdfOperator01Step00);
               </script>
            </section>
            <section>
               <h4>Reflection Operator</h4><br/>
               <div style="width:60%">
               <ul>
                 <li>The BRDF cuts the angular frequency
                    <ul class="sublist">
                      <li>Acts as a low-pass filter</li>
                      <li>Cutof depends on the BRDF lobe
                    </ul>
                  </li>
               </ul>
               </div>

               <svg id="operator-brdf-02" width="400px" height="250px"></svg>
               <script>
                 var snap  = Snap("#operator-brdf-02");
                 var frame = CreateFrame(snap, 200, 150, 200, 200);
                 var cov   = CreateCovariance(snap, frame, Snap.matrix(0.9, -0.9, 0, 0.1, 0, 0));
                 snap.rect(100, 100, 200, 100).attr({fill: "#aa0000", fillOpacity: 0.3});
               </script>
               <pre style="width:60%;" class="fragment">
               <code class="matlab">
% BRDF with cut at 'b'
B   = [0, 0; 0, b]
Cov = inverse(inverse(Cov) + B)
               </code>
               </pre>
            </section>


            <!-- Transmission operator -->
            <section>
               <h4>BRDF is not All!</h4>
               <center style="width: 100%;position:absolute;top:50px;left: 0;">
               <svg id="rendering-equation-12" width="1080" style="border-width: 0px;margin: 0;"></svg>
               </center>

               <script type="text/javascript">
               function photonMapping02Step00(snap) {
                    snap.select("#variance").attr({ opacity: 0 });
                    snap.select("#bias").attr({ opacity: 0 });
                    snap.select("#adaptive").attr({ opacity: 0 });

                    snap.select("#eye01a").attr({ opacity: 0 });
                    snap.select("#hit01").attr({ opacity: 0 });
                    snap.select("#eye02").attr({ opacity: 0 });
                    snap.select("#eye03").attr({ opacity: 0 });

                    snap.select("#photona").attr({ opacity: 0 });
                    snap.select("#photonb").attr({ opacity: 0 });
                }
                  loadSVG("data/svg/course-photon-mapping-02.svg", "#rendering-equation-12", photonMapping02Step00);
               </script>
            </section>
            <section>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-10px;"><img src="../../data/images/thesis.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-7px;">&nbsp;<a href="#url(belcourThesis)">Belcour 2012</a></span>
               <h4>Refraction Operator</h4><br/>
               <center>
                  <div style="position:relative;width:900px;height:500px;">
                  <canvas id="draw_cov_bsdf-cv" style="position:absolute;"></canvas>
                  <svg id="draw_cov_bsdf-svg" width="900px" height="500px" style="position:absolute;top:0px;left:0px;"></svg></div>
                  <div style="font-size:0.7em;position:absolute;top:670px;left:630px;">Refractive index: 1 <input style="vertical-align: middle;" type="range" min="1.0" max="3.0" value="1.0" step="0.05" id="draw_cov_bsdf-slider" /> 3</div>
               </center>
               <script type="text/javascript">
                  loadSVG("data/svg/cov_bsdf.svg", "#draw_cov_bsdf-svg", bsdfOperator01Step00);
               </script>
            </section>
            <section>
               <h4>Refraction Operator</h4><br/>
               <div style="width:80%">
               <ul>
                 <li>Snell laws scale the angular component
                    <ul class="sublist">
                      <li>Critical angle as a windowing (increase freq. near TIR)</li>
                      <li>Rough refraction as low pass filter on top</li>
                    </ul>
                  </li>
               </ul>
               </div>

               <svg id="operator-bsdf-01" width="400px" height="250px"></svg>
               <script>
                 var snap  = Snap("#operator-bsdf-01");
                 var frame = CreateFrame(snap, 200, 150, 200, 200);
                 var cov   = CreateCovariance(snap, frame, Snap.matrix(0.8, 0.5, 0.5, 0.2, 0, 0));


                 var BsdfScaleAnimation = function(start, end) {
                  var s = Snap("#operator-bsdf-01");
                  var c = s.select("#circle");

                  const M = c.transform().localMatrix;
                  Snap.animate(start, end, function(val) {
                    c.transform(M);
                    var temp = Snap.matrix(1, 0, 0, val, 0, 0);
                    c.transform(c.transform().localMatrix.add(temp));
                  }, 500);
                }


                Reveal.addEventListener( 'fragmentshown', function( event ) {
                    if(event.fragment.id == "operator-bsdf-01-scale") {  BsdfScaleAnimation(1, 0.5); }
                });
                Reveal.addEventListener( 'fragmenthidden', function( event ) {
                    if(event.fragment.id == "operator-bsdf-01-scale") { BsdfScaleAnimation(1, 2.0); }
                });
               </script>
               <pre class="fragment" id="operator-bsdf-01-scale"></pre>

               <pre style="width:60%;" class="fragment">
               <code class="matlab">
% Snell interface with e=n1/n2
Tf = [1, 0; 0, e*i.z/t.z]
Cov = Tf' * Cov * Tf
               </code>
               </pre>
            </section>


            <!-- BSSRDF operator -->
            <!--
            <section>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-10px;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(milanen2016)">Milaenen et al. 2016</a></span>
               <h4>BSSRDF Operator</h4><br/>
            </section>
            <section>
               <h4>BSSRDF Operator</h4><br/>
            </section>
            -->


            <!-- Lens operator -->
            <section>
               <h4>Adding Defocus!</h4>
               <center style="width: 100%;position:absolute;top:50px;left: 0;">
               <svg id="rendering-equation-13" width="1080" style="border-width: 0px;margin: 0;"></svg>
               </center>
               <script type="text/javascript">
                  loadSVG("data/svg/course-pbr03.svg", "#rendering-equation-13", null);
               </script>
            </section>
            <section>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-10px;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(durand2005)">Soler et al. 2009</a></span>
               <h4>Lens Operator</h4><br/>
               <svg id="cov-lens-svg" width="900px" height="350px"></svg><br />
               <script type="text/javascript">
                  loadSVG("data/svg/cov_lens.svg", "#cov-lens-svg", null);
               </script>
               <center style="padding-top:20px;"><div style="width:80%;text-align:left;"><ul>
                 <li>A compound of already seen operators!
                    <ul class="sublist">
                      <li>Curvature and transmission in the lens</li>
                      <li>Travel to the sensor</li>
                    </ul>
                  </li>
               </ul></div></center>
            </section>
            <section>
               <h4>Lens Operator</h4><br/>
               <center style="padding-top:20px;"><div style="width:80%;text-align:left;"><ul>
                 <li>For thin lenses, it simplifies to
                    <ul class="sublist">
                      <li>Curvature plus Travel operators</li>
                    </ul>
                  </li>
               </ul></div></center>

               <svg id="operator-lens-01" width="400px" height="250px"></svg>
               <script>
                 var snap  = Snap("#operator-lens-01");
                 var frame = CreateFrame(snap, 200, 150, 200, 200);
                 var mat   = Snap.matrix(0.9, 0, 0, 0.1, 0, 0);
                 var cov   = CreateCovariance(snap, frame, mat);

                 var LensShearAnimation = function(start, end) {
                  var s = Snap("#operator-lens-01");
                  var c = s.select("#circle");

                  var M = c.transform();
                  Snap.animate(start, end, function(val) {
                    c.transform(M);
                    var temp1 = Snap.matrix(1, val, 0, 1, 0, 0);
                    c.transform(c.transform().localMatrix.add(temp1));
                  }, 100);
                }

                var LensShearAnimation02 = function(start, end) {
                  var s = Snap("#operator-lens-01");
                  var c = s.select("#circle");

                  var M = c.transform();
                  Snap.animate(start, end, function(val) {
                    c.transform(M);
                    var temp2 = Snap.matrix(1, 0, val, 1, 0, 0);

                    c.transform(temp2.add(c.transform().localMatrix));
                  }, 100);
                }

                var shearX =  9.0;
                var shearY = -1.0;

                Reveal.addEventListener( 'fragmentshown', function( event ) {
                    if(event.fragment.id == "operator-lens-01-shear01") { LensShearAnimation(0, shearX); }
                    if(event.fragment.id == "operator-lens-01-shear02") { LensShearAnimation02(0, shearY); }
                });
                Reveal.addEventListener( 'fragmenthidden', function( event ) {
                    if(event.fragment.id == "operator-lens-01-shear01") { LensShearAnimation(0, -shearX); }
                    if(event.fragment.id == "operator-lens-01-shear02") { LensShearAnimation02(0, -shearY); }
                });
               </script>
               <pre class="fragment" id="operator-lens-01-shear01"></pre>
               <pre class="fragment" id="operator-lens-01-shear02"></pre>

               <pre style="width:60%;" class="fragment">
               <code class="matlab">
% Lens with focal length f and distance to sensor d
C   = [1, f; 0, 1]
Tr  = [1, 0; d, 1]
L   = C * Tr
Cov = L' * Cov * L
               </code>
               </pre>
            </section>

            <!-- Motion operator -->
            <section>
               <h4>Adding Motion-Blur</h4>
               <center style="width: 100%;position:absolute;top:50px;left:0;">
               <svg id="rendering-equation-14" width="1080px" style="border-width: 0px;margin: 0;"></svg>
               </center>
               <script type="text/javascript">
                  loadSVG("data/svg/course-pbr04.svg", "#rendering-equation-14", null);
               </script>
            </section>
            <section>
               <h4>Adding Another Dimension for Motion-Blur</h4>
               <center>
               <div style="width:80%;text-align:left;"  class="fragment" data-fragment-index="1">
                <ul>
                  <li>A new dimension: time.</li>
                </ul>
               </div>
               <pre style="width:60%;" class="fragment" data-fragment-index="1">
               <code class="matlab">
Cov = {sxx, sxu, sxt;
       sxu, suu, sut;
       sxt, sut, stt};
               </code>
               </pre>

               <div style="width:80%;text-align:left;padding-bottom:20px;"  class="fragment" data-fragment-index="2">
                <ul>
                  <li>Easy formulation: coordinate change.</li>
                </ul>
               </div>
               <svg width="300px" height="300px" id="motion-cat-moving"  class="fragment" data-fragment-index="3"></svg>
               <svg width="300px" height="300px" id="motion-couch-moving"  class="fragment" data-fragment-index="4"></svg>
               <script>
                 var s1 = Snap("#motion-cat-moving");
                 var r1 = s1.rect(0, 0, 300, 300);
                 loadImageSVG("/data/images/cat.png", "#motion-cat-moving", 200, 200, "cat");
                 loadImageSVG("/data/images/couch.png", "#motion-cat-moving", 300, 200, "couch");
                 var cat = s1.select("#cat");
                 var couch = s1.select("#couch");
                 var r2 = r1.clone();
                 var r3 = r1.clone();
                 s1.append(r2);
                 s1.append(r3);
                 cat.select("image").attr({x: 60, y: 10, clip: r3});
                 couch.select("image").attr({y: 180, clip: r2});
                 var g = snap.group(cat, couch);
                 s1.append(g);
                 cat.select("image").animate({y: 10}, 10000);

                 var f = s1.filter(Snap.filter.blur(0, 10));
                 cat.attr({filter: f});

                 var s2 = Snap("#motion-couch-moving");
                 s2.rect(0, 0, 300, 300);
                 var copycat   = cat.clone();
                 var copycouch = couch.clone();

                  var f1 = s2.filter(Snap.filter.blur(0, 10));
                  var f2 = s2.filter(Snap.filter.blur(0, 0));
                  copycouch.attr({filter: f1});
                  copycat.attr({filter: f2});

                 s2.append(copycat);
                 s2.append(copycouch);
               </script>
               </center>
            </section>
            <section>
               <h4>Motion Operator</h4><br/>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:0em;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(egan2009)">Egan et al. 2009</a></span>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:1.4em;;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;"">&nbsp;<a href="#url(belcour2013)">Belcour et al. 2013</a></span>
            </section>
            <section>
               <h4>Motion Operator</h4><br/>
               <div style="width:80%">
               <ul>
                 <li>Motion is a shear in space/angle/time
                    <ul class="sublist">
                      <li>Our local Fourier Transform window follows the motion</li>
                      <li>Need to apply the operator twice (before and after interaction)</li>
                    </ul>
                  </li>
               </ul>
               </div>

               <svg id="operator-motion-01" width="400px" height="250px"></svg>
               <script>
                 var snap  = Snap("#operator-motion-01");
                 var frame = CreateFrame(snap, 200, 150, 200, 200, {x: "x", u: "t"});
                 var cov   = CreateCovariance(snap, frame, Snap.matrix(0.5, 0, 0, 0.01, 0, 0));

                 var MotionShearAnimation = function(start, end) {
                  var s = Snap("#operator-motion-01");
                  var c = s.select("#circle");

                  var M = c.transform();
                  Snap.animate(start, end, function(val) {
                    c.transform(M);
                    var temp = Snap.matrix(1, val, 0, 1, 0, 0);
                    c.transform(temp.add(c.transform().localMatrix));
                  }, 100);
                }

                var MotionScaleAnimation = function(start, end) {
                  var s = Snap("#operator-motion-01");
                  var c = s.select("#circle");

                  var M = c.transform().localMatrix;
                  Snap.animate(start, end, function(val) {
                    var temp = M;
                    temp.d = temp.d + val;
                    c.transform(temp);
                  }, 100);
                }

                var shearT = 1.0;
                var scaleX = 0.1;

                Reveal.addEventListener( 'fragmentshown', function( event ) {
                    if(event.fragment.id == "operator-motion-01-shear") { MotionShearAnimation(0, shearT); }
                    if(event.fragment.id == "operator-motion-01-scale") { MotionScaleAnimation(0, scaleX); }
                    if(event.fragment.id == "operator-motion-01-shearB") { MotionShearAnimation(0, -shearT); }
                });
                Reveal.addEventListener( 'fragmenthidden', function( event ) {
                    if(event.fragment.id == "operator-motion-01-shear") { MotionShearAnimation(0, -shearT); }
                    if(event.fragment.id == "operator-motion-01-scale") { MotionScaleAnimation(0, -scaleX); }
                    if(event.fragment.id == "operator-motion-01-shearB") { MotionShearAnimation(0, shearT); }
                });
               </script>
               <pre class="fragment" id="operator-motion-01-shear"></pre>
               <pre class="fragment" id="operator-motion-01-scale"></pre>
               <pre class="fragment" id="operator-motion-01-shearB"></pre>

               <pre style="width:60%;" class="fragment">
               <code class="matlab">
% Occlusion with moving object of speed 'vx'
M   = [1, 0, vx; 0, 1, 0; 0, 0, 1]
O   = [o, 0, 0; 0, 0, 0; 0, 0, 0]
Cov = M * (M' * Cov * M + O) * M'
               </code>
               </pre>
            </section>

            <!-- Participating media operator -->
            <section>
               <h4>Adding Volumes</h4>
               <center style="width: 100%;position:absolute;top:50px;left: 0;">
               <svg id="rendering-equation-15" width="1080" style="border-width: 0px;margin: 0;"></svg>
               </center>
               <script type="text/javascript">
                  loadSVG("data/svg/course-pbr05.svg", "#rendering-equation-15", null);
               </script>
            </section>
            <section>
              <span style="position:absolute;font-size:0.7em;text-align:right;width:100%;left:0px;top:-10px;"><img src="../../data/images/acm.png"  height="32px" style="border:0px;box-shadow:none;margin:0px;vertical-align:-5px;">&nbsp;<a href="#url(belcour2014)">Belcour et al. 2014</a></span>
               <h4>Participating Media Operators</h4><br/>
               <center style="padding-top:0px;"><div style="width:80%;text-align:left;"><ul>
                  <li>Using a different <em>rendering equation</em>:
                    <ul>
                        <li>Radiative Transfert Equation [<a href="#url(ishimaru1978)">Ishimaru 1978</a>]</li>
                        <li>Still defined on the radiance $ L(\mathbf{x}, \omega) $</li>
                    </ul>
                  </li>
               </ul></div></center>
               <!--<img style="border:0px;box-shadow:0px 0px;" src="../../data/svg/course-volume-01.svg" width="900px" />-->
               <svg class="fragment" style="margin-top:50px;" width="900px" height="400px" id="volume-equation-01"></svg>
               <script>
var volume01Step00 = function(snap) {
   snap.select("#Eq01").attr({ opacity: 0 });
   snap.select("#Eq02").attr({ opacity: 0 });
   snap.select("#Eq03").attr({ opacity: 0 });
   snap.select("#absorption").attr({ opacity: 0 });
   snap.select("#scattering").attr({ opacity: 0 });
}

var volume01Step01 = function(val) {
   var snap = Snap("#volume-equation-01");
   snap.select("#Eq01").animate({ opacity: val }, 500);
}
var volume01Step02 = function(val) {
   var snap = Snap("#volume-equation-01");
   snap.select("#Eq02").animate({ opacity: val }, 500);
   snap.select("#absorption").animate({ opacity: val }, 1000);
}
var volume01Step03 = function(val) {
   var snap = Snap("#volume-equation-01");
   snap.select("#Eq03").animate({ opacity: val }, 500);
   snap.select("#scattering").animate({ opacity: val }, 1000);
}

loadSVG("data/svg/course-volume-01.svg", "#volume-equation-01", volume01Step00);
Reveal.addEventListener( 'fragmentshown', function( event ) {
    if(event.fragment.id == "volume01Step01") { volume01Step01(1); }
    if(event.fragment.id == "volume01Step02") { volume01Step02(1); }
    if(event.fragment.id == "volume01Step03") { volume01Step03(1); }
});
Reveal.addEventListener( 'fragmenthidden', function( event ) {
    if(event.fragment.id == "volume01Step01") { volume01Step01(0); }
    if(event.fragment.id == "volume01Step02") { volume01Step02(1); }
    if(event.fragment.id == "volume01Step03") { volume01Step03(1); }
});
               </script>
               <pre class="fragment" id="volume01Step01"></pre>
               <pre class="fragment" id="volume01Step02"></pre>
               <pre class="fragment" id="volume01Step03"></pre>
            </section>
            <section>
               <h4>Absorption Operator</h4>
               <center style="padding-top:0px;"><div style="width:80%;text-align:left;"><ul>
                 <li>Same operator as occlusion
                    <ul class="sublist">
                      <li>However not an infinite bandwidth</li>
                    </ul>
                  </li>
               </ul></div></center>
               <object type="image/svg+xml" data="../../data/svg/course-volume-02.svg" width="1050px" id="volume-equation-02"></object><br />
               <script type="text/javascript">
var volume02Step00 = function(snap) {
   cx = 700-180;
   cy = 150;
   var frame  = CreateFrame(snap, cx, cy, 220, 220);
   var cov    = CreateCovariance(snap, frame, Snap.matrix(0.4, 0.1, 0, 0.05, 0, 0));
   var arrowA = snap.polyline([-110, 0, +110, 0]).attr({ id: "arrowA", strokeWidth: "2px", stroke: "#e69494", markerEnd: snap.select("#Arrow1Send"), markerStart: snap.select("#Arrow2Sstart") });
   var arrowB = snap.polyline([-110, 0, +110, 0]).attr({ id: "arrowB", strokeWidth: "2px", stroke: "#e69494", markerEnd: snap.select("#Arrow1Send"), markerStart: snap.select("#Arrow2Sstart") });
   frame.append(arrowA.transform(Snap.matrix().translate(0, -20)));
   frame.append(arrowB.transform(Snap.matrix().translate(0, +20)));

   snap.select("#density02").attr({ opacity: 0 });
   snap.select("#density01").attr({ opacity: 1 });
}
var volume02Step01 = function(val, start, end) {
   var snap = Snap("#volume-equation-02");
   snap.select("#density02").animate({ opacity: val }, 1000);
   snap.select("#density01").animate({ opacity: 1-val }, 500);

   Snap.animate(start, end, function(x) {
      var mat = Snap.matrix(x, 0, 0, 1, 0, -20);
      snap.select("#arrowA").transform(mat);
      mat = Snap.matrix(x, 0, 0, 1, 0, +20);
      snap.select("#arrowB").transform(mat);
   }, 500);
}

var svg = document.getElementById("volume-equation-02");
svg.onload = function() {
  var snap = Snap("#volume-equation-02");
  volume02Step00(snap);
}
Reveal.addEventListener( 'fragmentshown', function( event ) {
    if(event.fragment.id == "volume02Step01") { volume02Step01(1, 1, 0.5); }
});
Reveal.addEventListener( 'fragmenthidden', function( event ) {
    if(event.fragment.id == "volume02Step01") { volume02Step01(0, 0.5, 1); }
});
               </script>
               <pre id="volume02Step01" class="fragment" />
            </section>
            <section>
               <h4>Scattering Operator</h4><br/>
               <center style="padding-top:0px;"><div style="width:80%;text-align:left;"><ul>
                 <li>Same operator as BRDF
                   <ul>
                     <li>Analytical forms for the Henyey-Greenstein phase function
                   </ul>
                 </li><br />
                 <li>Need to be aligned with the outgoing ray
                    <ul>
                       <li>Add a scale in the spatial domain</li>
                       <li>Same as projection with no curvature</li>
                    </ul>
                 </li>
               </ul></div></center>
            </section>


            <!-- Summary of all the operators -->
            <section>
               <h4>Summary: Frequency Operators</h4>
               <img src="../../data/svg/course-operators-summary.svg" id="operator-summary-01" width="1280" height="500px" style="border:none;box-shadow:none;"></svg>
               <!--<script type="text/javascript">
                  loadSVG("data/svg/course-operators-summary.svg", "#operator-summary-01", null);
               </script>-->
            </section>

            <!-- Validation for the operator -->
            <section>
               <h4>Validation</h4>
               <img src="../../data/images/course-validation.png" width="900" />
            </section>
            <section>
               <h4>Summary: A Unified Theory</h4>
               <svg id="operator-bib-01" width="1200" height="400px" style="transform: scale(1.2);"></svg>
               <script type="text/javascript">
                  loadSVG("data/svg/course-bib-summary.svg", "#operator-bib-01", null);
               </script>
            </section>


            <!-- Break before part2: applications -->
            <section class="title">
               <h4>Break: Questions?</h4><br />
               <a style="font-size:0.7em;float:right;padding-top:22%" href="part2.html">> next part</a>
            </section>
         <div>
      </div>


      <script>
         // More info https://github.com/hakimel/reveal.js#configuration
         Reveal.initialize({
            controls: false,
            progress: true,
            history: true,
            center: false,
            slideNumber: true,
            transition: 'fade',
            width: 1280,
            height: 720,
            dependencies: [
              { src: '../js/mathjax.js', async: true },
              { src: '../js/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            ]
         });

         // Reveal.addEventListener( 'fragmentshown', intro01anim01fw);
         // Reveal.addEventListener( 'fragmenthidden', intro01anim01bw);


         // Reveal.addEventListener( 'helloshown', function() { alert("Hello"); } );
         // Reveal.addEventListener( 'hellohidden', intro01anim01bw);
      </script>
   </body>
</html>